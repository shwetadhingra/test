drop table ci_meta_attributes if exists cascade
drop table ci_meta_class_attributes if exists cascade
drop table ci_meta_class_relationships if exists cascade
drop table ci_meta_classes if exists cascade
drop table ci_meta_statuses if exists cascade
drop table ci_object_attributes if exists cascade
drop table ci_objects if exists cascade
drop table ci_relationship_attributes if exists cascade
drop table ci_relationships if exists cascade
create table ci_meta_attributes (attribute_id integer generated by default as identity (start with 1), created timestamp not null, updated timestamp, attribute_name varchar(256) not null, primary key (attribute_id), unique (attribute_name))
create table ci_meta_class_attributes (class_id integer not null, attribute_id integer not null, unique (class_id, attribute_id))
create table ci_meta_class_relationships (id integer generated by default as identity (start with 1), created timestamp not null, updated timestamp, from_class integer not null, relationship_class integer not null, to_class integer not null, primary key (id), unique (from_class, to_class, relationship_class))
create table ci_meta_classes (class_id integer generated by default as identity (start with 1), created timestamp not null, updated timestamp, is_relationship bit not null, class_name varchar(256) not null, parent_class_id integer, primary key (class_id), unique (parent_class_id), unique (class_name))
create table ci_meta_statuses (status_id integer generated by default as identity (start with 1), created timestamp not null, updated timestamp, status_name varchar(256) not null, primary key (status_id), unique (status_name))
create table ci_object_attributes (id integer generated by default as identity (start with 1), created timestamp not null, updated timestamp, attribute_value varchar(4096), attribute_id integer not null, object_id integer not null, primary key (id), unique (object_id, attribute_id))
create table ci_objects (object_id integer generated by default as identity (start with 1), created timestamp not null, updated timestamp, object_name varchar(200) not null, namespace varchar(256) not null, class_id integer not null, status_id integer not null, primary key (object_id), unique (object_name, namespace))
create table ci_relationship_attributes (id integer generated by default as identity (start with 1), created timestamp not null, updated timestamp, attribute_value varchar(4096), attribute_id integer not null, relationship_id integer not null, primary key (id), unique (relationship_id, attribute_id))
create table ci_relationships (relationship_id integer generated by default as identity (start with 1), created timestamp not null, updated timestamp, relationship_name varchar(512) not null, namespace varchar(256) not null, from_object integer not null, class_id integer not null, status_id integer not null, to_object integer not null, primary key (relationship_id), unique (relationship_name, namespace))
alter table ci_meta_class_attributes add constraint FKD5C90E5FFDCA4373 foreign key (class_id) references ci_meta_classes
alter table ci_meta_class_attributes add constraint FKD5C90E5FBFDE80F3 foreign key (attribute_id) references ci_meta_attributes
alter table ci_meta_class_relationships add constraint FKE29C6F33435786E2 foreign key (relationship_class) references ci_meta_classes
alter table ci_meta_class_relationships add constraint FKE29C6F337E22A0E5 foreign key (to_class) references ci_meta_classes
alter table ci_meta_class_relationships add constraint FKE29C6F3368ACCAD4 foreign key (from_class) references ci_meta_classes
alter table ci_meta_classes add constraint FK89F55325D3328B68 foreign key (parent_class_id) references ci_meta_classes
alter table ci_object_attributes add constraint FK97AA16BE5E4BEF12 foreign key (object_id) references ci_objects
alter table ci_object_attributes add constraint FK97AA16BEBFDE80F3 foreign key (attribute_id) references ci_meta_attributes
alter table ci_objects add constraint FK721BB23BFDCA4373 foreign key (class_id) references ci_meta_classes
alter table ci_objects add constraint FK721BB23B65FCD417 foreign key (status_id) references ci_meta_statuses
alter table ci_relationship_attributes add constraint FK6ACB4E5815CE072 foreign key (relationship_id) references ci_relationships
alter table ci_relationship_attributes add constraint FK6ACB4E5BFDE80F3 foreign key (attribute_id) references ci_meta_attributes
alter table ci_relationships add constraint FK3DF8522FDCA4373 foreign key (class_id) references ci_meta_classes
alter table ci_relationships add constraint FK3DF8522BBE5D26B foreign key (from_object) references ci_objects
alter table ci_relationships add constraint FK3DF8522552ABE7A foreign key (to_object) references ci_objects
alter table ci_relationships add constraint FK3DF852265FCD417 foreign key (status_id) references ci_meta_statuses
